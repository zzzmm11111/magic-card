import{O as C,P,Q as B,B as M,m as c,w as j,c as A,o as D,g as R}from"./index-B8BPln--.js";function _(e){return C()?(P(e),!0):!1}function W(e){return typeof e=="function"?e():B(e)}const L=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const G=Object.prototype.toString,I=e=>G.call(e)==="[object Object]",V=()=>{},b=L?window:void 0;function H(e){var t;const r=W(e);return(t=r==null?void 0:r.$el)!=null?t:r}function y(...e){let t,r,o,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([r,o,i]=e,t=b):[t,r,o,i]=e,!t)return V;Array.isArray(r)||(r=[r]),Array.isArray(o)||(o=[o]);const l=[],u=()=>{l.forEach(m=>m()),l.length=0},a=(m,v,p,d)=>(m.addEventListener(v,p,d),()=>m.removeEventListener(v,p,d)),f=j(()=>[H(t),W(i)],([m,v])=>{if(u(),!m)return;const p=I(v)?{...v}:v;l.push(...r.flatMap(d=>o.map(h=>a(m,d,h,p))))},{immediate:!0,flush:"post"}),g=()=>{f(),u()};return _(g),g}function F(){const e=c(!1),t=R();return t&&D(()=>{e.value=!0},t),e}function T(e){const t=F();return A(()=>(t.value,!!e()))}function N(e={}){const{window:t=b}=e,r=T(()=>t&&"DeviceOrientationEvent"in t),o=c(!1),i=c(null),l=c(null),u=c(null);return t&&r.value&&y(t,"deviceorientation",a=>{o.value=a.absolute,i.value=a.alpha,l.value=a.beta,u.value=a.gamma}),{isSupported:r,isAbsolute:o,alpha:i,beta:l,gamma:u}}const Q={page:e=>[e.pageX,e.pageY],client:e=>[e.clientX,e.clientY],screen:e=>[e.screenX,e.screenY],movement:e=>e instanceof Touch?null:[e.movementX,e.movementY]};function U(e={}){const{type:t="page",touch:r=!0,resetOnTouchEnds:o=!1,initialValue:i={x:0,y:0},window:l=b,target:u=l,scroll:a=!0,eventFilter:f}=e;let g=null,m=0,v=0;const p=c(i.x),d=c(i.y),h=c(null),w=typeof t=="function"?t:Q[t],n=s=>{const X=w(s);g=s,X&&([p.value,d.value]=X,h.value="mouse"),l&&(m=l.scrollX,v=l.scrollY)},O=s=>{if(s.touches.length>0){const X=w(s.touches[0]);X&&([p.value,d.value]=X,h.value="touch")}},Y=()=>{if(!g||!l)return;const s=w(g);g instanceof MouseEvent&&s&&(p.value=s[0]+l.scrollX-m,d.value=s[1]+l.scrollY-v)},x=()=>{p.value=i.x,d.value=i.y},k=f?s=>f(()=>n(s),{}):s=>n(s),S=f?s=>f(()=>O(s),{}):s=>O(s),E=f?()=>f(()=>Y(),{}):()=>Y();if(u){const s={passive:!0};y(u,["mousemove","dragover"],k,s),r&&t!=="movement"&&(y(u,["touchstart","touchmove"],S,s),o&&y(u,"touchend",x,s)),a&&t==="page"&&y(l,"scroll",E,{passive:!0})}return{x:p,y:d,sourceType:h}}function $(e,t={}){const{handleOutside:r=!0,window:o=b}=t,i=t.type||"page",{x:l,y:u,sourceType:a}=U(t),f=c(e??(o==null?void 0:o.document.body)),g=c(0),m=c(0),v=c(0),p=c(0),d=c(0),h=c(0),w=c(!0);let n=()=>{};return o&&(n=j([f,l,u],()=>{const O=H(f);if(!O||!(O instanceof Element))return;const{left:Y,top:x,width:k,height:S}=O.getBoundingClientRect();v.value=Y+(i==="page"?o.pageXOffset:0),p.value=x+(i==="page"?o.pageYOffset:0),d.value=S,h.value=k;const E=l.value-v.value,s=u.value-p.value;w.value=k===0||S===0||E<0||s<0||E>k||s>S,(r||!w.value)&&(g.value=E,m.value=s)},{immediate:!0}),y(document,"mouseleave",()=>{w.value=!0})),{x:l,y:u,sourceType:a,elementX:g,elementY:m,elementPositionX:v,elementPositionY:p,elementHeight:d,elementWidth:h,isOutside:w,stop:n}}function q(e={}){const{window:t=b}=e,r=T(()=>t&&"screen"in t&&"orientation"in t.screen),o=r.value?t.screen.orientation:{},i=c(o.type),l=c(o.angle||0);return r.value&&y(t,"orientationchange",()=>{i.value=o.type,l.value=o.angle}),{isSupported:r,orientation:i,angle:l,lockOrientation:f=>r.value&&typeof o.lock=="function"?o.lock(f):Promise.reject(new Error("Not supported")),unlockOrientation:()=>{r.value&&typeof o.unlock=="function"&&o.unlock()}}}function J(e,t={}){const{deviceOrientationTiltAdjust:r=n=>n,deviceOrientationRollAdjust:o=n=>n,mouseTiltAdjust:i=n=>n,mouseRollAdjust:l=n=>n,window:u=b}=t,a=M(N({window:u})),f=M(q({window:u})),{elementX:g,elementY:m,elementWidth:v,elementHeight:p}=$(e,{handleOutside:!1,window:u}),d=A(()=>a.isSupported&&(a.alpha!=null&&a.alpha!==0||a.gamma!=null&&a.gamma!==0)?"deviceOrientation":"mouse"),h=A(()=>{if(d.value==="deviceOrientation"){let n;switch(f.orientation){case"landscape-primary":n=a.gamma/90;break;case"landscape-secondary":n=-a.gamma/90;break;case"portrait-primary":n=-a.beta/90;break;case"portrait-secondary":n=a.beta/90;break;default:n=-a.beta/90}return o(n)}else{const n=-(m.value-p.value/2)/p.value;return l(n)}}),w=A(()=>{if(d.value==="deviceOrientation"){let n;switch(f.orientation){case"landscape-primary":n=a.beta/90;break;case"landscape-secondary":n=-a.beta/90;break;case"portrait-primary":n=a.gamma/90;break;case"portrait-secondary":n=-a.gamma/90;break;default:n=a.gamma/90}return r(n)}else{const n=(g.value-v.value/2)/v.value;return i(n)}});return{roll:h,tilt:w,source:d}}export{J as u};
