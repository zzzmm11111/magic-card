import{_ as C,$ as P,M as g,f as T,j as f,w as A,c as k,o as _,g as D}from"./index-DYStAT_o.js";function j(e){return C()?(P(e),!0):!1}function L(e){return typeof e=="function"?e():g(e)}const B=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const G=Object.prototype.toString,I=e=>G.call(e)==="[object Object]",Q=()=>{},E=B?window:void 0;function V(e){var t;const o=L(e);return(t=o==null?void 0:o.$el)!=null?t:o}function w(...e){let t,o,n,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([o,n,r]=e,t=E):[t,o,n,r]=e,!t)return Q;Array.isArray(o)||(o=[o]),Array.isArray(n)||(n=[n]);const s=[],u=()=>{s.forEach(h=>h()),s.length=0},v=(h,l,p,d)=>(h.addEventListener(l,p,d),()=>h.removeEventListener(l,p,d)),c=A(()=>[V(t),L(r)],([h,l])=>{if(u(),!h)return;const p=I(l)?{...l}:l;s.push(...o.flatMap(d=>n.map(y=>v(h,d,y,p))))},{immediate:!0,flush:"post"}),i=()=>{c(),u()};return j(i),i}function R(){const e=f(!1),t=D();return t&&_(()=>{e.value=!0},t),e}function H(e){const t=R();return k(()=>(t.value,!!e()))}function $(e,t={}){const{window:o=E}=t,n=H(()=>o&&"matchMedia"in o&&typeof o.matchMedia=="function");let r;const s=f(!1),u=i=>{s.value=i.matches},v=()=>{r&&("removeEventListener"in r?r.removeEventListener("change",u):r.removeListener(u))},c=T(()=>{n.value&&(v(),r=o.matchMedia(L(e)),"addEventListener"in r?r.addEventListener("change",u):r.addListener(u),s.value=r.matches)});return j(()=>{c(),v(),r=void 0}),s}function F(e={}){const{window:t=E}=e,o=H(()=>t&&"DeviceOrientationEvent"in t),n=f(!1),r=f(null),s=f(null),u=f(null);return t&&o.value&&w(t,"deviceorientation",v=>{n.value=v.absolute,r.value=v.alpha,s.value=v.beta,u.value=v.gamma}),{isSupported:o,isAbsolute:n,alpha:r,beta:s,gamma:u}}const N={page:e=>[e.pageX,e.pageY],client:e=>[e.clientX,e.clientY],screen:e=>[e.screenX,e.screenY],movement:e=>e instanceof Touch?null:[e.movementX,e.movementY]};function U(e={}){const{type:t="page",touch:o=!0,resetOnTouchEnds:n=!1,initialValue:r={x:0,y:0},window:s=E,target:u=s,scroll:v=!0,eventFilter:c}=e;let i=null,h=0,l=0;const p=f(r.x),d=f(r.y),y=f(null),m=typeof t=="function"?t:N[t],b=a=>{const Y=m(a);i=a,Y&&([p.value,d.value]=Y,y.value="mouse"),s&&(h=s.scrollX,l=s.scrollY)},O=a=>{if(a.touches.length>0){const Y=m(a.touches[0]);Y&&([p.value,d.value]=Y,y.value="touch")}},x=()=>{if(!i||!s)return;const a=m(i);i instanceof MouseEvent&&a&&(p.value=a[0]+s.scrollX-h,d.value=a[1]+s.scrollY-l)},W=()=>{p.value=r.x,d.value=r.y},M=c?a=>c(()=>b(a),{}):a=>b(a),S=c?a=>c(()=>O(a),{}):a=>O(a),X=c?()=>c(()=>x(),{}):()=>x();if(u){const a={passive:!0};w(u,["mousemove","dragover"],M,a),o&&t!=="movement"&&(w(u,["touchstart","touchmove"],S,a),n&&w(u,"touchend",W,a)),v&&t==="page"&&w(s,"scroll",X,{passive:!0})}return{x:p,y:d,sourceType:y}}function q(e,t={}){const{handleOutside:o=!0,window:n=E}=t,r=t.type||"page",{x:s,y:u,sourceType:v}=U(t),c=f(e??(n==null?void 0:n.document.body)),i=f(0),h=f(0),l=f(0),p=f(0),d=f(0),y=f(0),m=f(!0);let b=()=>{};return n&&(b=A([c,s,u],()=>{const O=V(c);if(!O||!(O instanceof Element))return;const{left:x,top:W,width:M,height:S}=O.getBoundingClientRect();l.value=x+(r==="page"?n.pageXOffset:0),p.value=W+(r==="page"?n.pageYOffset:0),d.value=S,y.value=M;const X=s.value-l.value,a=u.value-p.value;m.value=M===0||S===0||X<0||a<0||X>M||a>S,(o||!m.value)&&(i.value=X,h.value=a)},{immediate:!0}),w(document,"mouseleave",()=>{m.value=!0})),{x:s,y:u,sourceType:v,elementX:i,elementY:h,elementPositionX:l,elementPositionY:p,elementHeight:d,elementWidth:y,isOutside:m,stop:b}}function z(e={}){const{window:t=E}=e,o=H(()=>t&&"screen"in t&&"orientation"in t.screen),n=o.value?t.screen.orientation:{},r=f(n.type),s=f(n.angle||0);return o.value&&w(t,"orientationchange",()=>{r.value=n.type,s.value=n.angle}),{isSupported:o,orientation:r,angle:s,lockOrientation:c=>o.value&&typeof n.lock=="function"?n.lock(c):Promise.reject(new Error("Not supported")),unlockOrientation:()=>{o.value&&typeof n.unlock=="function"&&n.unlock()}}}function K(e){const t=$("(pointer: fine) and (hover: hover)"),o=q(e,{handleOutside:!1}),n=F(),r=z(),s=k(()=>{var l;if(g(t)){const{elementX:p,elementWidth:d}=o,y=g(p),m=g(d);return m<=0?0:(y-m/2)/m}const c=n.beta.value,i=n.gamma.value;if(c==null||i==null)return 0;switch(((l=r.orientation)==null?void 0:l.value)??""){case"landscape-primary":return c/90;case"landscape-secondary":return-c/90;case"portrait-primary":return i/90;case"portrait-secondary":return-i/90;default:return i/90}}),u=k(()=>{var l;if(g(t)){const{elementY:p,elementHeight:d}=o,y=g(p),m=g(d);return m<=0?0:-(y-m/2)/m}const c=n.beta.value,i=n.gamma.value;if(c==null||i==null)return 0;switch(((l=r.orientation)==null?void 0:l.value)??""){case"landscape-primary":return i/90;case"landscape-secondary":return-i/90;case"portrait-primary":return-c/90;case"portrait-secondary":return c/90;default:return-c/90}}),v=k(()=>g(t)?"mouse":"deviceOrientation");return{tilt:s,roll:u,source:v}}export{K as u};
