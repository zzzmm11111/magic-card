import{g as V,e as D,u as F,r as M,f,h as W,i as w,j as N,k as R,l as L,c as j,a as x,b as z,w as I,t as A,F as G,m as U,n as C,o as B,d as q}from"./index-23w7cm_p.js";import{B as J}from"./Button-lwGox-jB.js";function K(e){return V()?(D(e),!0):!1}function H(e){return typeof e=="function"?e():F(e)}const Q=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Z=Object.prototype.toString,ee=e=>Z.call(e)==="[object Object]",te=()=>{},k=Q?window:void 0;function P(e){var n;const t=H(e);return(n=t==null?void 0:t.$el)!=null?n:t}function b(...e){let n,t,o,u;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,o,u]=e,n=k):[n,t,o,u]=e,!n)return te;Array.isArray(t)||(t=[t]),Array.isArray(o)||(o=[o]);const l=[],d=()=>{l.forEach(i=>i()),l.length=0},s=(i,v,p,c)=>(i.addEventListener(v,p,c),()=>i.removeEventListener(v,p,c)),m=W(()=>[P(n),H(u)],([i,v])=>{if(d(),!i)return;const p=ee(v)?{...v}:v;l.push(...t.flatMap(c=>o.map(g=>s(i,c,g,p))))},{immediate:!0,flush:"post"}),y=()=>{m(),d()};return K(y),y}function ne(){const e=f(!1),n=R();return n&&N(()=>{e.value=!0},n),e}function T(e){const n=ne();return w(()=>(n.value,!!e()))}function oe(e={}){const{window:n=k}=e,t=T(()=>n&&"DeviceOrientationEvent"in n),o=f(!1),u=f(null),l=f(null),d=f(null);return n&&t.value&&b(n,"deviceorientation",s=>{o.value=s.absolute,u.value=s.alpha,l.value=s.beta,d.value=s.gamma}),{isSupported:t,isAbsolute:o,alpha:u,beta:l,gamma:d}}const ae={page:e=>[e.pageX,e.pageY],client:e=>[e.clientX,e.clientY],screen:e=>[e.screenX,e.screenY],movement:e=>e instanceof Touch?null:[e.movementX,e.movementY]};function se(e={}){const{type:n="page",touch:t=!0,resetOnTouchEnds:o=!1,initialValue:u={x:0,y:0},window:l=k,target:d=l,scroll:s=!0,eventFilter:m}=e;let y=null,i=0,v=0;const p=f(u.x),c=f(u.y),g=f(null),h=typeof n=="function"?n:ae[n],a=r=>{const _=h(r);y=r,_&&([p.value,c.value]=_,g.value="mouse"),l&&(i=l.scrollX,v=l.scrollY)},O=r=>{if(r.touches.length>0){const _=h(r.touches[0]);_&&([p.value,c.value]=_,g.value="touch")}},$=()=>{if(!y||!l)return;const r=h(y);y instanceof MouseEvent&&r&&(p.value=r[0]+l.scrollX-i,c.value=r[1]+l.scrollY-v)},E=()=>{p.value=u.x,c.value=u.y},S=m?r=>m(()=>a(r),{}):r=>a(r),X=m?r=>m(()=>O(r),{}):r=>O(r),Y=m?()=>m(()=>$(),{}):()=>$();if(d){const r={passive:!0};b(d,["mousemove","dragover"],S,r),t&&n!=="movement"&&(b(d,["touchstart","touchmove"],X,r),o&&b(d,"touchend",E,r)),s&&n==="page"&&b(l,"scroll",Y,{passive:!0})}return{x:p,y:c,sourceType:g}}function le(e,n={}){const{handleOutside:t=!0,window:o=k}=n,u=n.type||"page",{x:l,y:d,sourceType:s}=se(n),m=f(e??(o==null?void 0:o.document.body)),y=f(0),i=f(0),v=f(0),p=f(0),c=f(0),g=f(0),h=f(!0);let a=()=>{};return o&&(a=W([m,l,d],()=>{const O=P(m);if(!O||!(O instanceof Element))return;const{left:$,top:E,width:S,height:X}=O.getBoundingClientRect();v.value=$+(u==="page"?o.pageXOffset:0),p.value=E+(u==="page"?o.pageYOffset:0),c.value=X,g.value=S;const Y=l.value-v.value,r=d.value-p.value;h.value=S===0||X===0||Y<0||r<0||Y>S||r>X,(t||!h.value)&&(y.value=Y,i.value=r)},{immediate:!0}),b(document,"mouseleave",()=>{h.value=!0})),{x:l,y:d,sourceType:s,elementX:y,elementY:i,elementPositionX:v,elementPositionY:p,elementHeight:c,elementWidth:g,isOutside:h,stop:a}}function re(e={}){const{window:n=k}=e,t=T(()=>n&&"screen"in n&&"orientation"in n.screen),o=t.value?n.screen.orientation:{},u=f(o.type),l=f(o.angle||0);return t.value&&b(n,"orientationchange",()=>{u.value=o.type,l.value=o.angle}),{isSupported:t,orientation:u,angle:l,lockOrientation:m=>t.value&&typeof o.lock=="function"?o.lock(m):Promise.reject(new Error("Not supported")),unlockOrientation:()=>{t.value&&typeof o.unlock=="function"&&o.unlock()}}}function ie(e,n={}){const{deviceOrientationTiltAdjust:t=a=>a,deviceOrientationRollAdjust:o=a=>a,mouseTiltAdjust:u=a=>a,mouseRollAdjust:l=a=>a,window:d=k}=n,s=M(oe({window:d})),m=M(re({window:d})),{elementX:y,elementY:i,elementWidth:v,elementHeight:p}=le(e,{handleOutside:!1,window:d}),c=w(()=>s.isSupported&&(s.alpha!=null&&s.alpha!==0||s.gamma!=null&&s.gamma!==0)?"deviceOrientation":"mouse"),g=w(()=>{if(c.value==="deviceOrientation"){let a;switch(m.orientation){case"landscape-primary":a=s.gamma/90;break;case"landscape-secondary":a=-s.gamma/90;break;case"portrait-primary":a=-s.beta/90;break;case"portrait-secondary":a=s.beta/90;break;default:a=-s.beta/90}return o(a)}else{const a=-(i.value-p.value/2)/p.value;return l(a)}}),h=w(()=>{if(c.value==="deviceOrientation"){let a;switch(m.orientation){case"landscape-primary":a=s.beta/90;break;case"landscape-secondary":a=-s.beta/90;break;case"portrait-primary":a=s.gamma/90;break;case"portrait-secondary":a=-s.gamma/90;break;default:a=s.gamma/90}return t(a)}else{const a=(y.value-v.value/2)/v.value;return u(a)}});return{roll:g,tilt:h,source:c}}const ce={class:"min-h-screen flex flex-col bg-linear-to-b from-slate-100 to-slate-200"},ue={class:"p-4 flex items-center gap-2"},de={class:"px-4 py-2 text-sm text-slate-500 font-mono bg-white/80 rounded-lg mx-4 mb-4"},pe={class:"relative w-64 h-64"},ve=L({__name:"ParallaxView",setup(e){const n=f(null),t=M(ie(n)),o={position:"absolute",height:"100%",width:"100%",transition:"0.2s ease-out",display:"flex",alignItems:"center",justifyContent:"center"},u=w(()=>({...o,transform:`translateX(${t.tilt*15}px) translateY(${t.roll*15}px) scale(1.2)`})),l=w(()=>({...o,transform:`translateX(${t.tilt*30}px) translateY(${t.roll*30}px) scale(1.2)`})),d=w(()=>({...o,transform:`translateX(${t.tilt*45}px) translateY(${t.roll*45}px) scale(1.2)`})),s=w(()=>({...o,transform:`translateX(${t.tilt*60}px) translateY(${t.roll*60}px) scale(1.2)`})),m=w(()=>({background:"rgba(255,255,255,0.95)",height:"18rem",width:"14rem",borderRadius:"12px",overflow:"hidden",transition:"0.2s ease-out",boxShadow:"0 10px 40px rgba(0,0,0,0.12)",transform:`rotateX(${t.roll*15}deg) rotateY(${t.tilt*15}deg)`}));return(y,i)=>{const v=J;return B(),j("div",ce,[x("header",ue,[z(v,{quaternary:"",size:"small",tag:"a",href:"#/"},{default:I(()=>[...i[0]||(i[0]=[q(" â† è¿”å› ",-1)])]),_:1}),i[1]||(i[1]=x("h1",{class:"text-lg font-semibold text-slate-700"}," useParallax ",-1))]),x("div",de,[x("div",null,"roll: "+A(t.roll.toFixed(3)),1),x("div",null,"tilt: "+A(t.tilt.toFixed(3)),1),x("div",null,"source: "+A(t.source),1)]),x("div",{ref_key:"container",ref:n,class:"flex-1 flex flex-col items-center justify-center px-4 py-8 touch-none select-none",style:{"min-height":"420px",perspective:"320px"}},[x("div",pe,[(B(!0),j(G,null,U([u.value,l.value,d.value,s.value],(p,c)=>(B(),j("div",{key:c,class:"rounded-full border-2 border-slate-300/60 bg-slate-200/80",style:C({...p,width:`${120-c*20}%`,height:`${120-c*20}%`,left:`${c*10}%`,top:`${c*10}%`})},null,4))),128))]),x("div",{class:"mt-8 relative z-10 flex items-center justify-center",style:C(m.value)},[...i[2]||(i[2]=[x("div",{class:"text-center p-6 text-slate-600"},[x("div",{class:"text-4xl mb-2"}," ğŸ´ "),x("div",{class:"font-medium"}," Parallax Card "),x("div",{class:"text-xs mt-1 opacity-70"}," ç§»åŠ¨é¼ æ ‡æˆ–å€¾æ–œè®¾å¤‡ ")],-1)])],4)],512),i[3]||(i[3]=x("p",{class:"text-center text-xs text-slate-400 pb-6"}," åŸºäº VueUse useParallax Â· æ¡Œé¢ç«¯è·Ÿéšé¼ æ ‡ï¼Œç§»åŠ¨ç«¯ä½¿ç”¨è®¾å¤‡æ–¹å‘ ",-1))])}}});export{ve as default};
