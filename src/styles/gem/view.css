/* 宝石页：纯 SVG 刻面，高光与刻面一一对应 */

@layer components {
  .parallax-gem {
    transition: transform 0.2s ease-out;
    /* 左右 tilt 32deg，上下 roll 加大幅度 */
    transform: rotateX(calc(var(--parallax-roll, 0) * 50deg)) rotateY(calc(var(--parallax-tilt, 0) * 32deg));
  }

  .gem-brilliant {
    position: relative;
    width: 11rem;   /* w-44 */
    height: 14rem;  /* h-56 */
    flex-shrink: 0;
    filter: drop-shadow(0 25px 25px rgba(0, 0, 0, 0.15));
  }

  .gem-svg {
    width: 100%;
    height: 100%;
    display: block;
  }

  .gem-svg .facet {
    transition: filter 0.15s ease-out;
  }

  /* 刻面填充组：可做轻微闪烁 */
  .facets-fill {
    animation: facet-shimmer 5s ease-in-out infinite;
  }

  @keyframes facet-shimmer {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.98; }
  }

  /* 随机位置闪烁的小星星，亮度不随角度变化 */
  .gem-svg .sparkle {
    opacity: 0;
    pointer-events: none;
  }

  .gem-svg .sparkle.sparkle--visible {
    animation: sparkle-flash 0.65s ease-out forwards;
  }

  @keyframes sparkle-flash {
    0% { opacity: 0; }
    40% { opacity: 1; }
    100% { opacity: 0; }
  }

  /* 宝石切换按钮：用 SVG 图当按钮 */
  .gem-switch-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 3.5rem;
    height: 3.5rem;
    padding: 0;
    border-radius: 0.75rem;
    border: 2px solid rgba(0, 0, 0, 0.12);
    background: rgba(255, 255, 255, 0.95);
    cursor: pointer;
    transition: background 0.2s, border-color 0.2s, box-shadow 0.2s, transform 0.15s;
  }
  .gem-switch-btn:hover {
    background: #f1f5f9;
    border-color: rgba(0, 0, 0, 0.2);
    transform: scale(1.05);
  }
  .gem-switch-btn--active {
    background: #e0e7ff;
    border-color: #6366f1;
    box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.3);
  }
  .gem-switch-btn__img {
    width: 2.5rem;
    height: 2.5rem;
    object-fit: contain;
    display: block;
  }
}
